<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Sports Betting Reality Check</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        :root {
            --finmango-orange: #FF8C42;
            --finmango-green: #8AC25E;
            --finmango-red: #FF4242;
            --text-black: #1A1A1A;
            --background: #F8FAFC;
            --card-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --hover-shadow: 0 25px 30px -5px rgba(0, 0, 0, 0.15), 0 15px 15px -5px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: var(--background);
            min-height: 100vh;
            padding: 1rem;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }

        .header {
            padding: 2.5rem;
            background: white;
            text-align: center;
        }

        .logo {
            height: 60px;
            margin-bottom: 1.5rem;
        }

        .title {
            color: var(--text-black);
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
        }

        .subtitle {
            color: #64748B;
            font-size: 1.125rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .simulation-controls {
            padding: 1.5rem;
            background: #F8FAFC;
            border-radius: 16px;
            margin: 1rem 2rem;
        }

        .control-group {
            margin-bottom: 1rem;
        }

        .control-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-black);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        input[type="range"] {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            background: #E2E8F0;
            border-radius: 4px;
            background-image: linear-gradient(var(--finmango-orange), var(--finmango-orange));
            background-size: 50% 100%;
            background-repeat: no-repeat;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: var(--finmango-orange);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
        }

        input[type="range"]::-webkit-slider-runnable-track {
            -webkit-appearance: none;
            box-shadow: none;
            border: none;
            background: transparent;
        }

        .slider-value {
            min-width: 80px;
            text-align: right;
            font-weight: 600;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
        }

        .stat-card {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .stat-label {
            color: #64748B;
            font-size: 1rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.75rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-black);
        }

        .negative-balance {
            color: var(--finmango-red);
        }

        .positive-balance {
            color: var(--finmango-green);
        }

        .chart-container {
            padding: 2rem;
            background: white;
            border-radius: 16px;
            margin: 2rem;
            height: 400px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .button-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            padding: 2rem;
        }

        .button {
            padding: 1rem 2rem;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .button-primary {
            background: var(--finmango-orange);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(255, 140, 66, 0.3);
        }

        .button-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 12px -1px rgba(255, 140, 66, 0.4);
        }

        .button-secondary {
            background: white;
            color: var(--finmango-orange);
            border: 2px solid var(--finmango-orange);
        }

        .button-secondary:hover:not(:disabled) {
            transform: translateY(-2px);
            background: rgba(255, 140, 66, 0.05);
        }

        .toggle-section {
            margin: 2rem;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .toggle-header {
            padding: 1.5rem;
            background: white;
            border: none;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .toggle-header:hover {
            background-color: #F8FAFC;
        }

        .toggle-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-black);
        }

        .toggle-arrow {
            transition: transform 0.3s ease;
        }

        .toggle-arrow.active {
            transform: rotate(180deg);
        }

        .toggle-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: #F8FAFC;
        }

        .toggle-content.active {
            max-height: 2000px;
        }

        .toggle-inner {
            padding: 1.5rem;
        }

        .awareness-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .awareness-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .awareness-card h4 {
            color: var(--finmango-orange);
            font-size: 1.125rem;
            margin-bottom: 1rem;
        }

        .awareness-card p {
            color: #64748B;
            line-height: 1.6;
        }

        .resources-section {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1.5rem;
        }

        .resources-section h4 {
            color: var(--text-black);
            margin-bottom: 1rem;
        }

        .resources-list {
            list-style: none;
        }

        .resources-list li {
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
            color: #64748B;
        }

        .resources-list li::before {
            content: "•";
            color: var(--finmango-orange);
            position: absolute;
            left: 0.5rem;
        }

        .math-section {
            margin-bottom: 1.5rem;
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
        }

        .math-section h5 {
            color: var(--finmango-orange);
            font-size: 1.125rem;
            margin-bottom: 1rem;
        }

        .math-section p {
            color: #64748B;
            margin-bottom: 0.75rem;
        }

        .math-section ul {
            list-style: none;
            padding-left: 1rem;
        }

        .math-section li {
            color: #64748B;
            margin-bottom: 0.5rem;
            position: relative;
            padding-left: 1rem;
        }

        .math-section li::before {
            content: "•";
            color: var(--finmango-orange);
            position: absolute;
            left: -0.5rem;
        }

        @media (max-width: 768px) {
            .header {
                padding: 1.5rem;
            }

            .title {
                font-size: 1.8rem;
            }

            .stats-container {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .chart-container {
                margin: 1rem;
                height: 300px;
            }

            .awareness-grid {
                grid-template-columns: 1fr;
            }

            .toggle-section {
                margin: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <img src="/api/placeholder/200/60" alt="FinMango Logo" class="logo">
            <h1 class="title">Modern Sports Betting Reality Check</h1>
            <p class="subtitle">Experience the reality of online sports betting through this interactive simulation</p>
        </header>

        <div class="simulation-controls">
            <div class="control-group">
                <label class="control-label">Initial Deposit</label>
                <div class="slider-container">
                    <input type="range" id="depositSlider" min="100" max="5000" step="100" value="1000">
                    <span class="slider-value" id="depositValue">$1,000</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Base Bet Amount (% of balance)</label>
                <div class="slider-container">
                    <input type="range" id="betPercentSlider" min="1" max="50" value="10">
                    <span class="slider-value" id="betPercentValue">10%</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Chase Losses Factor</label>
                <div class="slider-container">
                    <input type="range" id="chaseFactorSlider" min="100" max="200" step="10" value="100">
                    <span class="slider-value" id="chaseFactorValue">1x</span>
                </div>
            </div>
        </div>

        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-label">Current Balance</div>
                <div class="stat-value" id="balance">$1,000</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Wagered</div>
                <div class="stat-value" id="wagered">$0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Bets Placed</div>
                <div class="stat-value" id="bets">0</div>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="balanceChart"></canvas>
        </div>

        <div class="button-container">
            <button id="placeBetButton" class="button button-primary">Place Bet</button>
            <button id="autoPlayButton" class="button button-secondary">Auto Play</button>
            <button id="resetButton" class="button button-secondary">Reset</button>
        </div>

        <div class="toggle-section">
            <button class="toggle-header" onclick="toggleSection('understanding')">
                <span class="toggle-title">Understanding Online Sports Betting</span>
                <svg class="toggle-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <div class="toggle-content" id="understanding-content">
                <div class="toggle-inner">
                    <div class="awareness-grid">
                        <div class="awareness-card">
                            <h4>The Digital Acceleration</h4>
                            <p>Online betting apps remove traditional barriers and friction points that once limited betting frequency and amounts. Push notifications, one-click deposits, and 24/7 access can lead to more frequent betting than intended.</p>
                        </div>
                        <div class="awareness-card">
                            <h4>Psychological Design</h4>
                            <p>Modern betting apps use sophisticated design techniques similar to social media platforms to maximize engagement. Features like "cash out," live betting, and parlay builders are specifically designed to encourage more betting.</p>
                        </div>
                        <div class="awareness-card">
                            <h4>The Chase Response</h4>
                            <p>"Chasing losses" - increasing bet sizes to recover previous losses - is a common behavior that online platforms make easier than ever. This simulator demonstrates how this pattern typically leads to larger losses.</p>
                        </div>
                    </div>

                    <div class="resources-section">
                        <h4>Need Support?</h4>
                        <ul class="resources-list">
                            <li>National Problem Gambling Helpline: 1-800-522-4700 (24/7 Confidential)</li>
                            <li>Gamblers Anonymous: www.gamblersanonymous.org</li>
                            <li>National Council on Problem Gambling: www.ncpgambling.org</li>
                            <li>Self-Exclusion Programs: Available through your state's gaming commission</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="toggle-section">
            <button class="toggle-header" onclick="toggleSection('math')">
                <span class="toggle-title">How Does the Math Work?</span>
                <svg class="toggle-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <div class="toggle-content" id="math-content">
                <div class="toggle-inner">
                    <div class="math-section">
                        <h5>House Edge</h5>
                        <p>In a typical sports bet:</p>
                        <ul>
                            <li>You bet $100 to win $91 (standard -110 odds)</li>
                            <li>True probability of winning each bet: 47.7%</li>
                            <li>Expected value per $100 bet: (0.477 × $91) - (0.523 × $100) = -$4.50</li>
                        </ul>
                    </div>
                    <div class="math-section">
                        <h5>Long-Term Impact</h5>
                        <p>Over time, this 4.5% house edge compounds:</p>
                        <ul>
                            <li>Each bet has 95.5% expected return</li>
                            <li>After 100 bets: Initial amount × (0.955)¹⁰⁰</li>
                            <li>This explains why sustained betting leads to predictable losses</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State variables
        let balance = 1000;
        let totalWagered = 0;
        let betsPlaced = 0;
        let lastBetLoss = 0;
        let autoPlayInterval = null;
        let isSimulating = false;
        let initialBalance = 1000;
        const DEBT_LIMIT = -10000; // Allow up to $10,000 in debt

        // Initialize Chart
        const ctx = document.getElementById('balanceChart').getContext('2d');
        const balanceChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Start'],
                datasets: [{
                    label: 'Balance',
                    data: [1000],
                    borderColor: function(context) {
                        const value = context.raw;
                        return value < 0 ? '#FF4242' : '#8AC25E';
                    },
                    backgroundColor: function(context) {
                        const value = context.raw;
                        return value < 0 ? 'rgba(255, 66, 66, 0.1)' : 'rgba(138, 194, 94, 0.1)';
                    },
                    segment: {
                        borderColor: function(context) {
                            const prev = context.p0.parsed.y;
                            const next = context.p1.parsed.y;
                            if (prev < 0 && next < 0) return '#FF4242';
                            if (prev >= 0 && next >= 0) return '#8AC25E';
                            return createGradient(ctx, prev < 0);
                        }
                    },
                    tension: 0.3,
                    borderWidth: 3,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        suggestedMin: -10000,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        title: {
                            display: true,
                            text: 'Balance ($)',
                            font: {
                                size: 14,
                                weight: '500'
                            }
                        },
                        ticks: {
                            callback: function(value) {
                                return value < 0 ? `-${Math.abs(value).toLocaleString()}` : `${value.toLocaleString()}`;
                            }
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        title: {
                            display: true,
                            text: 'Number of Bets',
                            font: {
                                size: 14,
                                weight: '500'
                            }
                        }
                    }
                },
                animation: {
                    duration: 0 // Disable animations for smoother updates
                }
            }
        });

        function createGradient(ctx, startNegative) {
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            if (startNegative) {
                gradient.addColorStop(0, '#FF4242');
                gradient.addColorStop(1, '#8AC25E');
            } else {
                gradient.addColorStop(0, '#8AC25E');
                gradient.addColorStop(1, '#FF4242');
            }
            return gradient;
        }

        // UI update functions
        function updateSliderBackground(slider) {
            const value = ((slider.value - slider.min) / (slider.max - slider.min)) * 100;
            slider.style.backgroundSize = `${value}% 100%`;
        }

        function updateDisplay() {
            const balanceText = balance < 0 ? `-${Math.abs(Math.round(balance)).toLocaleString()}` : `${Math.round(balance).toLocaleString()}`;
            document.getElementById('balance').textContent = balanceText;
            
            document.getElementById('balance').className = 
                'stat-value ' + (balance >= 0 ? 'positive-balance' : 'negative-balance');
            
            document.getElementById('wagered').textContent = `${Math.round(totalWagered).toLocaleString()}`;
            document.getElementById('bets').textContent = betsPlaced.toString();

            // Update chart with new data point
            if (betsPlaced > 0) {
                if (balanceChart.data.labels.length > betsPlaced) {
                    balanceChart.data.labels = balanceChart.data.labels.slice(0, betsPlaced + 1);
                    balanceChart.data.datasets[0].data = balanceChart.data.datasets[0].data.slice(0, betsPlaced + 1);
                }
                balanceChart.data.labels[betsPlaced] = betsPlaced;
                balanceChart.data.datasets[0].data[betsPlaced] = balance;
                balanceChart.update();
            }

            const betDisabled = balance <= DEBT_LIMIT;
            document.getElementById('placeBetButton').disabled = betDisabled || isSimulating;
            if (betDisabled && autoPlayInterval) {
                stopAutoPlay();
            }
        }

        function calculateBetAmount() {
            const baseAmount = Math.abs(balance * (betPercentSlider.value / 100));
            const chaseFactor = lastBetLoss > 0 ? (chaseFactorSlider.value / 100) : 1;
            let betAmount = baseAmount * chaseFactor;
            
            if (balance - betAmount < DEBT_LIMIT) {
                betAmount = Math.abs(DEBT_LIMIT - balance);
            }
            
            return Math.max(1, Math.round(betAmount * 100) / 100);
        }

        function placeBet() {
            if (balance <= DEBT_LIMIT) {
                stopAutoPlay();
                alert("You've hit your credit limit of -$10,000. No more bets allowed.");
                return;
            }

            const betAmount = calculateBetAmount();
            const winProbability = 0.477; // True probability considering house edge
            const won = Math.random() < winProbability;

            totalWagered += betAmount;
            
            if (won) {
                balance += (betAmount * 0.91); // Standard -110 odds payout
                lastBetLoss = 0;
            } else {
                balance -= betAmount;
                lastBetLoss = betAmount;
            }

            betsPlaced++;
            balance = Math.round(balance * 100) / 100;
            updateDisplay();

            if (balance <= DEBT_LIMIT) {
                stopAutoPlay();
                alert("You've hit your credit limit of -$10,000. No more bets allowed.");
            }
        }

        function startAutoPlay() {
            if (!autoPlayInterval && balance > DEBT_LIMIT) {
                autoPlayInterval = setInterval(placeBet, 100);
                document.getElementById('autoPlayButton').textContent = 'Stop Auto';
                document.getElementById('placeBetButton').disabled = true;
                isSimulating = true;
            }
        }

        function stopAutoPlay() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
                autoPlayInterval = null;
                document.getElementById('autoPlayButton').textContent = 'Auto Play';
                document.getElementById('placeBetButton').disabled = balance <= DEBT_LIMIT;
                isSimulating = false;
            }
        }

        function toggleAutoPlay() {
            if (autoPlayInterval) {
                stopAutoPlay();
            } else {
                startAutoPlay();
            }
        }

        function resetSimulation() {
            stopAutoPlay();
            
            initialBalance = parseInt(depositSlider.value);
            balance = initialBalance;
            totalWagered = 0;
            betsPlaced = 0;
            lastBetLoss = 0;
            isSimulating = false;

            balanceChart.data.labels = ['Start'];
            balanceChart.data.datasets[0].data = [balance];
            balanceChart.update();

            document.getElementById('placeBetButton').disabled = false;
            updateDisplay();
        }

        function toggleSection(sectionId) {
            const content = document.getElementById(`${sectionId}-content`);
            const arrow = content.previousElementSibling.querySelector('.toggle-arrow');
            content.classList.toggle('active');
            arrow.classList.toggle('active');
        }

        // Initialize sliders
        function initializeSliders() {
            depositSlider.addEventListener('input', function() {
                document.getElementById('depositValue').textContent = `${this.value}`;
                updateSliderBackground(this);
            });

            betPercentSlider.addEventListener('input', function() {
                document.getElementById('betPercentValue').textContent = `${this.value}%`;
                updateSliderBackground(this);
            });

            chaseFactorSlider.addEventListener('input', function() {
                const factor = this.value / 100;
                document.getElementById('chaseFactorValue').textContent = `${factor}x`;
                updateSliderBackground(this);
            });

            document.querySelectorAll('input[type="range"]').forEach(slider => {
                updateSliderBackground(slider);
            });
        }

        // Initialize event listeners
        document.getElementById('placeBetButton').addEventListener('click', placeBet);
        document.getElementById('autoPlayButton').addEventListener('click', toggleAutoPlay);
        document.getElementById('resetButton').addEventListener('click', resetSimulation);

        // Initialize the simulation
        const depositSlider = document.getElementById('depositSlider');
        const betPercentSlider = document.getElementById('betPercentSlider');
        const chaseFactorSlider = document.getElementById('chaseFactorSlider');
        
        initializeSliders();
        resetSimulation();
    </script>
</body>
</html>
